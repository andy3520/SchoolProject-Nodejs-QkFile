function changeToGreen(e){$(".title-upload").addClass("text-color-active"),$(".file-upload").addClass("active"),$(".upload-btn").addClass("active"),$(".transform-color").addClass("active"),$("#findcode").addClass("active"),$("#findpass").addClass("active"),$("#noFile").text(e.replace("C:\\fakepath\\",""))}function changeToYellow(){$(".title-upload").removeClass("text-color-active"),$(".file-upload").removeClass("active"),$(".upload-btn").removeClass("active"),$("#findcode").removeClass("active"),$("#findpass").removeClass("active"),$(".transform-color").removeClass("active"),$("#noFile").text("No file chosen...")}function sendAjaxUpload(){if(0===$("#chooseFile").get(0).files.length)$("#errorModal").modal("show"),$("#errorMessage").html("Vui lòng chọn file");else{$("#preloadModal").modal({backdrop:"static",keyboard:!1});const e=new FormData($("form#uploadform")[0]);$.ajax({type:"POST",url:$("form#uploadform").attr("action"),data:e,success:e=>{$("#preloadModal").modal("hide"),$("#resultModal").modal("show"),$("img#iconSuccess").css("display","block"),setTimeout(()=>{$("img#iconSuccess").attr("src","images/success-icon-0.png")},1200),$("#codeResult").html(e.code),$("form#uploadform")[0].reset(),changeToYellow()},error:e=>{$("#preloadModal").modal("hide"),$("#errorModal").modal("show");let o=$.parseJSON(e.responseText);$("#errorMessage").html(`${e.status} - ${o.err}`)},cache:!1,contentType:!1,processData:!1})}}$("#chooseFile").bind("change",()=>{const e=$("#chooseFile").val();/^\s*$/.test(e)?changeToYellow():changeToGreen(e)}),$("#hideModalUpload").click(()=>{$("#codeResult").html(""),$("img#iconSuccess").attr("src","images/success-icon.gif")}),$("form#uploadform").submit(e=>{e.preventDefault(),sendAjaxUpload()}),$("form#findform").submit(e=>{e.preventDefault();let o=$("input#findcode-find"),a=$("input#pass-find");if(0===o.val().length)$("#errorModal").modal("show"),$("#errorMessage").html("Vui lòng nhập mã tìm kiếm");else{$("#preloadModal").modal({backdrop:"static",keyboard:!1});const e={};e.code=o.val(),e.pass=a.val(),""!==e.pass&&void 0!==e.pass||(e.pass=" "),$.ajax({type:"POST",contentType:"application/json",url:$("form#findform").attr("action"),data:JSON.stringify(e),success:e=>{$("#preloadModal").modal("hide"),$("#resultModal").modal("show"),$("#modal-dialog").addClass("des-download"),$("img#iconSuccess").css("display","block"),setTimeout(()=>{$("img#iconSuccess").attr("src","images/success-icon-0.png")},1200);let o=e.data,a=Number(o.fileSize)/1024,s=Math.round(a)<1e3?Math.round(a)+"KB":Math.round(a/1024)+"MB";$("#codeResult").html("CODE"+`<h3>${o.code}</h3>`+"FILENAME (click &darr; to download)"+`<h3><a style='text-decoration: underline; color:#78B345;' target='_blank' href='/download/${o.fileName}'>${o.fileName}</a></h3>`+"SIZE"+`<h3>${s}</h3>`+"TYPE"+`<h3>${o.fileType}</h3>`)},error:e=>{$("#preloadModal").modal("hide"),$("#errorModal").modal("show");let o=$.parseJSON(e.responseText);$("#errorMessage").html(`${e.status} - ${o.err}`)},cache:!1,processData:!1})}}),$(document.body).on("hide.bs.modal,hidden.bs.modal",function(){$("body").css("padding-right","0"),$("#modal-dialog").removeClass("des-download")});